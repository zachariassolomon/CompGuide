<ui:composition     xmlns="http://www.w3.org/1999/xhtml"
                    xmlns:c="http://java.sun.com/jsp/jstl/core"
                    xmlns:h="http://xmlns.jcp.org/jsf/html"
                    xmlns:b="http://bootsfaces.net/ui"
                    xmlns:f="http://java.sun.com/jsf/core"
                    xmlns:ui="http://xmlns.jcp.org/jsf/facelets" 
                    xmlns:p="http://primefaces.org/ui"
                    xmlns:pe="http://primefaces.org/ui/extensions">

    <h:panelGrid id="actionDetails">
        <h:form id="contentAction">
            <p:outputPanel id="something" autoUpdate="true">

                <table id="actions" class="table table-hover display"
                       cellspacing="0" role="grid" style="border-collapse: collapse;">                    
                    <thead>
                        <tr>
                            <th></th>
                            <th>Action Identifier</th>
                            <th>Decription</th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <ui:repeat value="#{scheduleTaskController.processedTask.tasks}" var="clinicalTask">
                            <h:form id="action" rendered="#{clinicalTask.taskType == 'Action'}">
                                <tr id="#{clinicalTask.id}">
                                    <td class="details-control">

                                    </td>
                                    <td>
                                        <strong>#{clinicalTask.id}</strong>
                                    </td>
                                    <td>
                                        <b:iconAwesome name="medkit"/> #{clinicalTask.generalDescription}
                                    </td>

                                </tr>
                                <tr style="display: none;">
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td>
                                        <div>
                                            <table id="actioncontent#{clinicalTask.id}"  style="display: none;" border="0">
                                                <ui:repeat value="#{clinicalTask.clinicalActions}" var="clinicalAction">
                                                    <h:form rendered="#{clinicalAction.actionType == 'MedicationRecommendation'}">
                                                        <caption>
                                                            <b:iconAwesome name="medkit"/> MedicationRecommendation 
                                                        </caption>                                                      
                                                        <tbody>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Name</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.name}
                                                                </td>
                                                            </tr>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Description</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.description}
                                                                </td>
                                                            </tr>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Active Ingredient</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.activeIngredient}
                                                                </td>
                                                            </tr>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Posology</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.posology}
                                                                </td>
                                                            </tr>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Phamaceutical Form</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.pharmaceuticalForm}
                                                                </td>
                                                            </tr>

                                                        </tbody>
                                                    </h:form>
                                                    <h:form rendered="#{clinicalAction.actionType == 'Formula'}">
                                                        <caption>
                                                            <b:iconAwesome name="stethoscope"/> Formula 
                                                        </caption>
                                                        <tbody>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Name</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.id}
                                                                </td>
                                                            </tr>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Mathematical Expression</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.mathematicalExpression}
                                                                </td>
                                                            </tr>
                                                            <tr class="spaceUnder">
                                                                <td>
                                                                    <strong>Result</strong>
                                                                </td>
                                                                <td>
                                                                    #{clinicalAction.result}
                                                                </td> 
                                                            </tr>
                                                        </tbody>
                                                    </h:form>
                                                    <h:form rendered="#{clinicalAction.actionType == 'Procedure'}">

                                                        <caption>
                                                            <b:iconAwesome name="heartbeat"/> Procedure 
                                                        </caption>

                                                        <tbody>
                                                            <tr class="spaceUnder">
                                                                <td><strong>Name</strong></td>

                                                                <td>
                                                                    #{clinicalAction.name}
                                                                </td>
                                                            </tr>
                                                            <tr class="spaceUnder">

                                                                <td><strong>Description</strong></td>

                                                                <td>
                                                                    #{clinicalAction.description}
                                                                </td> 
                                                            </tr>

                                                        </tbody>
                                                    </h:form>
                                                </ui:repeat>
                                            </table>
                                        </div>
                                    </td>
                                </tr>

                            </h:form>

                        </ui:repeat>
                    </tbody>
                </table>
            </p:outputPanel>
        </h:form>
    </h:panelGrid>  

</ui:composition>

